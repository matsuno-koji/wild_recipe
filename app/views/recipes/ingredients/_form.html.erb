<div class="ingredient-form">
  <div class="ingredients-show">
    <% if @recipe.ingredient.empty? %>
      <p>材料を入力しましょう</p>
    <% else %>
      <%= render "recipes/ingredients/show" %>
    <% end %>
  </div>
  
  <dt class="pr10"><a>材料を変更する</a></dt>
  <dd>
    <%= form_with model: @ingredients, url: ingredients_path do |form| %>
      <%= hidden_field_tag :recipe_id, @recipe.id %>
      <table class="ingredient-form-table">
        <% @recipe.ingredient.each_with_index do |ingredient| %>
          <% unless ingredient.name.nil? %>
            <%= fields_for 'ingredients[]', ingredient do |field| %>
              <tr class="ingredient-box">
                <td><%= field.text_field :name, placeholder: "材料名", value: ingredient.name %></td>
                <td><%= field.text_field :amount, placeholder: "量", value: ingredient.amount %></td>
                <td><a class="add-ing-form btn">+</a></td>
                <td><a class="delete-ing-form btn">-</a></td>
              </tr>
            <% end %>
          <% end %>
        <% end %>
      </table>
      <div class="btn-wrapper">
        <%= form.submit "保存する", class: "btn"%>
      </div>
    <% end %>
  </dd>
</div>
