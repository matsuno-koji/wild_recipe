<% @procedures.each do |procedure| %>
  <% unless procedure.content.nil? %>
    <div class="formbox procedure-box" data-formno="<%= procedure.number %>" >
      <div class="procedure-list flex flex-left">
        <div class="formbox-no"><%= procedure.number %></div>:
        <div class="procedure-show" name="number[<%= procedure.number %>]"><%= procedure.content %></div>
      </div>

      <div class="procedure-input-textarea">
        <%= form_with model: @procedure, url: procedures_path do |form| %>
          <%= hidden_field_tag :recipe_id, @recipe.id %>
          <%= form.text_area :content, placeholder: "手順を入力しましょう", value: procedure.content, id: "textarea#{procedure.number}" %>
          <%= form.hidden_field :number, value: "#{procedure.number}",class: "hidden-number" %>
          <%= form.submit "保存" %>
        <% end %>
      </div>

      <div class="flex flex-end">
        <%= form_with url: procedures_change_before_path do |form| %>
          <%= hidden_field_tag :recipe_id, @recipe.id %>
          <%= hidden_field_tag :number, procedure.number, class: "hidden-number" %>
          <%= form.submit "↑", class: "change_content_button" %>
        <% end %>
        
        <%= form_with url: procedures_change_after_path do |form| %>
          <%= hidden_field_tag :recipe_id, @recipe.id %>
          <%= hidden_field_tag :number, procedure.number, class: "hidden-number" %>
          <%= form.submit "↓", class: "change_content_button" %>
        <% end %>
      </div>
      
      <%= form_with url: procedures_destroy_path, method: :delete do |form| %>
        <%= hidden_field_tag :recipe_id, @recipe.id %>
        <%= hidden_field_tag :number, procedure.number, class: "hidden-number" %>
        <%= form.submit "削除" %>
      <% end %>
    
    </div>
  <% end %>
<% end %>
<p class="text-center"><a class="add-form btn midium-btn">追加する</a></p>